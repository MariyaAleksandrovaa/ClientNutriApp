<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html lang="en">

<head>
<title>EditorNutriApp</title>

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!-- Custom Theme files -->
<link href="../../../css/bootstrap.css" type="text/css" rel="stylesheet" media="all">

<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"/>
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

<link href="../../../css/style.css" type="text/css" rel="stylesheet" media="all">   
<link href="../../../css/font-awesome.css" rel="stylesheet"> <!-- font-awesome icons --> 
<link rel="stylesheet" href="../../css/smoothbox.css" type='text/css' media="all" /> 
<!-- //Custom Theme files --> 

<!-- js -->
<script src="../../../js/jquery-2.2.3.min.js"></script>  
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script> -->
<!-- //js -->

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<!-- web-fonts -->   
<link href="//fonts.googleapis.com/css?family=Playfair+Display:400,400i,700,700i,900,900i" rel="stylesheet">
<!-- //web-fonts -->
</head>

<body> 
	<!-- banner -->
	<div class="banner">
		<!-- header -->
		<div class="header">
			<div class="container">
				<div class="logo">
					<h1><a href="index.html">NutriApp</a></h1>
				</div> 
			</div>
		</div>
		<!-- //header --> 
		<!-- banner-text -->
		<div class="banner-text w3labout-bnr"> 
			<div class="container">  
				<h2 style="color:#000000">Consumidor</h2>   
			</div>
		</div>
		<!-- //banner-text -->
	</div>
	<!-- //banner -->   
	<!-- gallery -->
	<div class="about gallery">
		<div class="container">  
				<nav aria-label="breadcrumb">
				  <ol class="breadcrumb" style="background-color:#ffffff;font-size:1.5em;">
				  	<li class="breadcrumb-item">
				  		<a th:href="@{/index}">Página principal</a>
				  	</li>
				  	<li class="breadcrumb-item">
				  		<a th:href="@{'/client/' + ${id_local}}">Escoger fecha del menú</a>
				  	</li>
				    <li class="breadcrumb-item">
				    	<a th:href="@{'/client/' + ${id_local} + '/' + ${date}}">Escoger menú</a>
				    </li>
				    <li class="breadcrumb-item"><a th:href="@{'/client/chooseAlergensComponents/' + ${id_local} + '/' + ${date} + '/' + ${id_menu} + '/'}">Escoger componentes o alérgenos</a></li>
				  	<li class="breadcrumb-item active">Información nutricional del menú</li>
				  
				  </ol>
				</nav>
				<label for="exampleInputEmail1" th:text="${menuName}" style="font-size: 2em;margin-bottom: 40px;margin-top: 30px;"></label>
				
				<ul class="nav nav-tabs" role="tablist" id="myTab">
				  <li role ="presentation"  class="nav-item" >
				    <a href="#seccion1" data-toggle="tab" role="tab" class="nav-link active">Gráfico</a>
				  </li>
				  <li role ="presentation" class="nav-item">
				  	<a href="#seccion2" data-toggle="tab" role="tab"class="nav-link">Componentes alimenticios por categorías</a>
				  </li>
				  <li role ="presentation" class="nav-item">
				  	<a href="#seccion3" data-toggle="tab" role="tab"class="nav-link">Tabla de componentes alimenticios</a>
				  </li>
				</ul>	
				<div class="tab-content">
					<div role="tabpanel" class="tab-pane active" id="seccion1">
						<label for="exampleInputEmail1" th:text="${name_menu}" style="font-size: 2em;margin-bottom: 30px;margin-top: 0px;"></label>
					    <div id="container" style="margin-bottom:40px;"></div>
					    
<!-- 						<b th:text="'Energía:   ' + ${porcentajeEnergia} + '%' " style="margin-left:20px;color:#00b347;font-size:1.5em;"> </b> -->
						<b th:text="'Hidratos de carbono:   ' + ${porcentajeHC} + '%' " style="margin-left:20px;color:#964B00;font-size:1.5em;"> </b>
						<b th:text="'Proteínas:   ' + ${porcentajeProteinas} + '%' " style="margin-left:20px;color:#4169E1;font-size:1.5em;"> </b>
						<b th:text="'Grasas:   ' + ${porcentajeGrasa} + '%' " style="margin-left:20px;color:#8A2BE2;font-size:1.5em;"> </b>
					
					</div>
					<div role="tabpanel" class="tab-pane " id="seccion2">
						<label for="exampleInputEmail1" th:text="${name_menu}" style="font-size: 2em;margin-bottom: 30px;margin-top: 0px;"></label>
						
						
						<div class ="row">
							<h4 style="margin-top:0px;font-size:1.8em;margin-bottom:20px;">Proximales</h4>
							<table class="table" style = "margin-top:0px;background-color:#9DC4E0;">
								
							  <thead>
							    <tr >
								  <th scope="col">Grupo componente</th>
							      <th scope="col">Nombre componente</th>
							      <th scope="col">Cantidad </th>
							      <th scope="col">Unidad</th>
							    </tr>
							  </thead>
							  <tbody id="myTable">
							    <tr th:each="componente: ${componentsDishTableProximal}">
				                    <td th:text="${componente.groupComponent}">Grupo componente</td>
				                    <td th:text="${componente.nameComponent}">Nombre componente</td>
				                    <td th:text="${componente.amount}">Cantidad</td>
				                    <td th:text="${componente.unit}">Unidad</td>
							    </tr>
							  </tbody>
							</table>
						</div>		
						
						<div class ="row">
						<h4 style="margin-top:20px;font-size:1.8em;margin-bottom:20px;">Hidratos de carbono</h4>
							<table class="table" style = "margin-top:0px;background-color:#FAB8AA;">
								
							  <thead>
							    <tr >
								  <th scope="col">Grupo componente</th>
							      <th scope="col">Nombre componente</th>
							      <th scope="col">Cantidad </th>
							      <th scope="col">Unidad</th>
							    </tr>
							  </thead>
							  <tbody id="myTable">
							    <tr th:each="componente: ${componentsDishTableHcarbono}">
				                    <td th:text="${componente.groupComponent}">Grupo componente</td>
				                    <td th:text="${componente.nameComponent}">Nombre componente</td>
				                    <td th:text="${componente.amount}">Cantidad</td>
				                    <td th:text="${componente.unit}">Unidad</td>
							    </tr>
							  </tbody>
							</table>
						</div>
						
						<div class ="row">
						<h4 style="margin-top:20px;font-size:1.8em;margin-bottom:20px;">Grasas</h4>
							<table class="table" style = "margin-top:0px;background-color:#FADB44;">
								
							  <thead>
							    <tr >
								  <th scope="col">Grupo componente</th>
							      <th scope="col">Nombre componente</th>
							      <th scope="col">Cantidad </th>
							      <th scope="col">Unidad</th>
							    </tr>
							  </thead>
							  <tbody id="myTable">
							    <tr th:each="componente: ${componentsDishTableGrasa}">
				                    <td th:text="${componente.groupComponent}">Grupo componente</td>
				                    <td th:text="${componente.nameComponent}">Nombre componente</td>
				                    <td th:text="${componente.amount}">Cantidad</td>
				                    <td th:text="${componente.unit}">Unidad</td>
							    </tr>
							  </tbody>
							</table>
						</div>
						
						<div class ="row">
						<h4 style="margin-top:20px;font-size:1.8em;margin-bottom:20px;">Vitaminas</h4>
							<table class="table" style = "margin-top:0px;background-color:#95F59A;">
								
							  <thead>
							    <tr >
								  <th scope="col">Grupo componente</th>
							      <th scope="col">Nombre componente</th>
							      <th scope="col">Cantidad </th>
							      <th scope="col">Unidad</th>
							    </tr>
							  </thead>
							  <tbody id="myTable">
							    <tr th:each="componente: ${componentsDishTableVitaminas}">
				                    <td th:text="${componente.groupComponent}">Grupo componente</td>
				                    <td th:text="${componente.nameComponent}">Nombre componente</td>
				                    <td th:text="${componente.amount}">Cantidad</td>
				                    <td th:text="${componente.unit}">Unidad</td>
							    </tr>
							  </tbody>
							</table>
						</div>
						
						<div class ="row">
						<h4 style="margin-top:20px;font-size:1.8em;margin-bottom:20px;">Minerales</h4>
							<table class="table" style = "margin-top:30px;background-color:#F1C7FF;">
								
							  <thead>
							    <tr >
								  <th scope="col">Grupo componente</th>
							      <th scope="col">Nombre componente</th>
							      <th scope="col">Cantidad </th>
							      <th scope="col">Unidad</th>
							    </tr>
							  </thead>
							  <tbody id="myTable">
							    <tr th:each="componente: ${componentsDishTableMinerales}">
				                    <td th:text="${componente.groupComponent}">Grupo componente</td>
				                    <td th:text="${componente.nameComponent}">Nombre componente</td>
				                    <td th:text="${componente.amount}">Cantidad</td>
				                    <td th:text="${componente.unit}">Unidad</td>
							    </tr>
							  </tbody>
							</table>
						</div>
					</div>
					<div role="tabpanel" class="tab-pane " id="seccion3">
						<label for="exampleInputEmail1" th:text="${name_menu}" style="font-size: 2em;margin-bottom: 30px;margin-top: 0px;"></label>
					
						<div class ="row">
							<table class="table" style = "margin-top:0px">
								
							  <thead>
							    <tr >
								  <th scope="col">Grupo componente</th>
							      <th scope="col">Nombre componente</th>
							      <th scope="col">Cantidad </th>
							      <th scope="col">Unidad</th>
							    </tr>
							  </thead>
							  <tbody id="completeTable">
							    <tr th:each="componente: ${listComponentsDish}">
				                    <td th:text="${componente.groupComponent}">Grupo componente</td>
				                    <td th:text="${componente.nameComponent}">Nombre componente</td>
				                    <td th:text="${componente.amount}">Cantidad</td>
				                    <td th:text="${componente.unit}">Unidad</td>
							    </tr>
							  </tbody>
							</table>
						</div>
					</div>
			</div>
		</div>
	</div>

	<!-- //gallery -->  
	<!-- footer -->
	<div class="footer">
		<div class="container">
			<div class="clearfix"> </div>
			<div class="w3agile_footer_copy">
				<p>© 2017 Dine. All rights reserved | Design by <a href="http://w3layouts.com/" target="_blank">W3layouts.</a></p>
			</div>
		</div>
	</div>
	<script>
		$('.navicon').on('click', function (e) {
		  e.preventDefault();
		  $(this).toggleClass('navicon--active');
		  $('.toggle').toggleClass('toggle--active');
		});
	</script> 
	<script>
	$(document).ready(function(){
	    $('a[data-toggle="tab"]').on('show.bs.tab', function(e) {
	        localStorage.setItem('activeTab', $(e.target).attr('href'));
	    });
	    var activeTab = localStorage.getItem('activeTab');
	    if(activeTab){
	        $('#myTab a[href="' + activeTab + '"]').tab('show');
	    }
	});
	</script>
	<script>
	$(document).ready(function() {
	    if (location.hash) {
	        $("a[href='" + location.hash + "']").tab("show");
	    }
	    $(document.body).on("click", "a[data-toggle='tab']", function(event) {
	        location.hash = this.getAttribute("href");
	    });
	});
	$(window).on("popstate", function() {
	    var anchor = location.hash || $("a[data-toggle='tab']").first().attr("href");
	    $("a[href='" + anchor + "']").tab("show");
	});
	</script>
	<!-- //menu-js -->
	<!-- jarallax -->  
	<script src="js/SmoothScroll.min.js"></script> 
	<script src="js/jarallax.js"></script> 
	<script type="text/javascript">
		/* init Jarallax */
		$('.jarallax').jarallax({
			speed: 0.5,
			imgWidth: 1366,
			imgHeight: 768
		})
	</script>  
	<!-- //jarallax --> 
	<!-- start-smooth-scrolling --> 
	<script type="text/javascript" src="js/move-top.js"></script>
	<script type="text/javascript" src="js/easing.js"></script>	
	<script type="text/javascript">
			jQuery(document).ready(function($) {
				$(".scroll").click(function(event){		
					event.preventDefault();
			
			$('html,body').animate({scrollTop:$(this.hash).offset().top},1000);
				});
			});
	</script>
	<script>
    var ctxP = document.getElementById("pieChart").getContext('2d');
    var myPieChart = new Chart(ctxP, {
      type: 'pie',
      data: {
        labels: ["Red", "Green", "Yellow", "Grey", "Dark Grey"],
        datasets: [{
          data: [300, 50, 100, 40, 120],
          backgroundColor: ["#F7464A", "#46BFBD", "#FDB45C", "#949FB1", "#4D5360"],
          hoverBackgroundColor: ["#FF5A5E", "#5AD3D1", "#FFC870", "#A8B3C5", "#616774"]
        }]
      },
      options: {
        responsive: true
      }
    });
	</script>
	<!-- //end-smooth-scrolling -->	 
	<!-- smooth-scrolling-of-move-up -->
	<script type="text/javascript">
		$(document).ready(function() {
			/*
			var defaults = {
				containerID: 'toTop', // fading element id
				containerHoverID: 'toTopHover', // fading element hover id
				scrollSpeed: 1200,
				easingType: 'linear' 
			};
			*/
			
			$().UItoTop({ easingType: 'easeOutQuart' });
			
		});
	</script>
	<script>
	$(document).ready(function(){
	  $("#myInput").on("keyup", function() {
	    var value = $(this).val().toLowerCase();
	    $("#myTable tr").filter(function() {
	      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
	    });
	  });
	});
	</script>
	<script>
    $(document).ready(function(){
        // Open modal on page load
        $("#myModal").modal('show');
        // Close modal on button click
        $(".btn").click(function(){
            $("#modal1").modal('hide');
        });
    });
	</script>
	<script>
	$(function(){
	    $('#orderModal').modal({
	        keyboard: true,
	        backdrop: "static",
	        show:false,

	    }).on('show', function(){ //subscribe to show method
	          var getIdFromRow = $(event.target).closest('tr').data('id'); //get the id from tr
	        //make your ajax call populate items or what even you need
	        $(this).find('#orderDetails').html($('<b> Order Id selected: ' + getIdFromRow  + '</b>'))
	    });
	});
	</script>
	<script>
	var globalModal = $('.global-modal');
    $( ".btn-green-flat-trigger" ).on( "click", function(e) {
      e.preventDefault();
      $( globalModal ).toggleClass('global-modal-show');
    });
    $( ".overlay" ).on( "click", function() {
      $( globalModal ).toggleClass('global-modal-show');
    });
    $( ".global-modal_close" ).on( "click", function() {
      $( globalModal ).toggleClass('global-modal-show');
    });
    $(".mobile-close").on("click", function(){
      $( globalModal ).toggleClass('global-modal-show');
    });
	</script>
	<script>
	$('#myTable').bootstrapTable({
	    onClickRow: function (row, $element) {
	        // row: the record corresponding to the clicked row, 
	        // $element: the tr element.
	        
	        var address = [];
	        $(this).closest('tr').find('td').not(':last').each(function() {
	            var textval = $(this).text(); // this will be the text of each <td>
	           address.push(textval);
	       });
	        alert(address.join('\n'));
	    }
	});
	</script>
		<script>
	$('#completeTable').bootstrapTable({
	    onClickRow: function (row, $element) {
	        // row: the record corresponding to the clicked row, 
	        // $element: the tr element.
	        
	        var address = [];
	        $(this).closest('tr').find('td').not(':last').each(function() {
	            var textval = $(this).text(); // this will be the text of each <td>
	           address.push(textval);
	       });
	        alert(address.join('\n'));
	    }
	});
	</script>

	<script>
	$("#completeTable td:nth-child(1)").each( function(x){
	     const texto = this.innerHTML;
	     switch(texto) {
	        case "Proximales":
	           color = "#9DC4E0" ;
	           break;
	        case "Grasas":
		           color = "#FADB44" ;
		           break;
	        case "Hidratos de Carbono":
		           color = "#FAB8AA" ;
		           break;
		           
	        case "Vitaminas":
		           color = "#95F59A" ;
		           break;
	        case "Minerales":
		           color = "#F1C7FF" ;
		           break;  
		    default:
		    		color ="#ffffff"
	     }
	     $(this.parentNode).attr("style","background-color:"+color)
	})
	</script>
	<script  th:inline="javascript">

	/*<![CDATA[*/
	
	    var porcentajeProteinas = /*[[${porcentajeProteinas}]]*/ 'default';
// 		var porcentajeEnergia = /*[[${porcentajeEnergia}]]*/ 'default';
		var porcentajeHC = /*[[${porcentajeHC}]]*/ 'default';
		var porcentajeGrasa = /*[[${porcentajeGrasa}]]*/ 'default';
		
		var porcentajeOtrosHC= /*[[${porcentajeOtrosHC}]]*/ 'default';
		var porcentajeFibra = /*[[${porcentajeFibra}]]*/ 'default';
		var porcentajeAzucar = /*[[${porcentajeAzucar}]]*/ 'default';
		
		var porcentajeAcGrasos = /*[[${porcentajeAcGrasos}]]*/ 'default';
		var porcentajeOtrasGrasas = /*[[${porcentajeOtrasGrasas}]]*/ 'default';
	
	/*]]>*/
	var colors = Highcharts.getOptions().colors,
	  categories = [
// 	    'Energía',
	    'Grasas',
	    'Proteína',
	    'Hidratos de Carbono'
	  ],
	  data = [
// 	    {
// 	      y: porcentajeEnergia,
// 	      color:  colors[2],
// 	      drilldown: {
// 	        name: 'Energía',
// 	        categories: [
// 	          'Energía'
// 	        ],
// 	        data: [
// 	        	porcentajeEnergia
// 	        ]
// 	      }
// 	    },
	    {
	      y: porcentajeGrasa,
	      color: colors[4],
	      drilldown: {
	        name: 'Grasas',
	        categories: [
		          'Ácidos grasos',
		          'Otras grasas'
	        ],
	        data: [
	        	porcentajeAcGrasos,
	        	porcentajeOtrasGrasas
	          
	        ]
	      }
	    },
	    {
	      y: porcentajeProteinas,
	      color: colors[0],
	      drilldown: {
	        name: 'Proteína',
	        categories: [
	          'Proteína'
	        ],
	        data: [
	        	porcentajeProteinas
	        ]
	      }
	    },
	    {
	      y: porcentajeHC,
	      color: colors[3],
	      drilldown: {
	        name: 'Hidratos de Carbono',
	        categories: [
	          'Fibra',
	          'Azúcares',
	          'Otros Hidratos de Carbono'
	        ],
	        data: [
	        	porcentajeFibra,
	        	porcentajeAzucar,
	        	porcentajeOtrosHC
	        ]
	      }
		    }
	  ],
	  salaryData = [],
	  percentageData = [],
	  i,
	  j,
	  dataLen = data.length,
	  drillDataLen,
	  brightness;


	// Build the data arrays
	for (i = 0; i < dataLen; i += 1) {

	  // add browser data
	  salaryData.push({
	    name: categories[i],
	    y: data[i].y,
	    color: data[i].color
	  });

	  // add percentage data
	  drillDataLen = data[i].drilldown.data.length;
	  for (j = 0; j < drillDataLen; j += 1) {
	    brightness = 0.2 - (j / drillDataLen) / 5;
	    percentageData.push({
	      name: data[i].drilldown.categories[j],
	      y: data[i].drilldown.data[j],
	      color: Highcharts.color(data[i].color).brighten(brightness).get()
	    });
	  }
	}

	// Create the chart
	Highcharts.chart('container', {
	  chart: {
	    type: 'pie'
	  },
	  title: {
	    text: null
	  },
	  subtitle: {
	    text: null
	  },
	  plotOptions: {
	    pie: {
	      shadow: false,
	      center: ['50%', '50%'],
	      startAngle: -90
	    }
	  },
	  tooltip: {
	    valueSuffix: '%'
	  },
	  series: [{
	    name: 'Percentage',
	    data: salaryData,
	    size: '60%',
	    dataLabels: {
	      formatter: function () {
	        return this.y > 5 ? this.point.name : null;
	      },
	      color: '#ffffff',
	      distance: -30
	    }
	  }, {
	    name: 'Percentage',
	    data: percentageData,
	    size: '80%',
	    innerSize: '60%',
	    dataLabels: {
	      formatter: function () {
	        // display only if larger than 1
	        return this.y > 1 ? '<b>' + this.point.name + '</b> ': null;
	      }
	    },
	    id: 'percentages'
	  }],
	  responsive: {
	    rules: [{
	      condition: {
	        maxWidth: 400
	      },
	      chartOptions: {
	        series: [{
	        }, {
	          id: 'percentages',
	          dataLabels: {
	            enabled: false
	          }
	        }]
	      }
	    }]
	  }
	});
	</script>
	

	<!-- //smooth-scrolling-of-move-up -->  		
	<!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/bootstrap.js"></script>

</body>
</html>